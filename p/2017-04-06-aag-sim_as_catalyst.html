<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
        <meta name="author" content="Nick Malleson">
        <meta name="keywords" content="ABM, dynamic data assimilation, EnKF, ensemble kalman filter">

		<title>Agent-Based Modelling, the Next 20 Years: Dynamic Data Assimilation</title>

		<link rel="stylesheet" href="reveal/css/reveal.css">
		<link rel="stylesheet" href="reveal/css/theme/white.css">
        
        <!-- Some extra bits added by Nick -->
        <link rel="stylesheet" href="reveal/css/nick.css">

		<!-- Theme used for syntax highlighting of code -->
		<link rel="stylesheet" href="reveal/lib/css/zenburn.css">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'reveal/css/print/pdf.css' : 'reveal/css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>
	</head>
	<body>
		<div class="reveal">
			<div class="slides">
                
                <!--
                <section data-markdown id="index"
                         data-background-image="http://surf.leeds.ac.uk/figures/cityscapes/chicago_bw.jpg">
                -->
                    
                <section class="title"  id="index">
                    
                    <h1>Agent-Based Modelling, the Next 20 Years: <i>Dynamic Data Assimilation</i></h1>
                    <hr/>
                    <h2><a href="http://www.geog.leeds.ac.uk/people/n.malleson/">Nick Malleson</a>, Jon Ward, Andy Evans</h2>
                    <h4>Schools of Geography &amp; Mathematics, University of Leeds</h4>
                    <h4><a href="http://nickmalleson.co.uk">nickmalleson.co.uk</a></h4>
                    <h4><a href="http://surf.leeds.ac.uk">surf.leeds.ac.uk</a></h4>
                    <p style="text-align:center">These slides: <a href="http://surf.leeds.ac.uk/presentations.html">http://surf.leeds.ac.uk/presentations.html</a></p>
                </section>
                

                <section id="abstract" >

                	
                	<h2>Abstract</h2>
                	
                	<p class="small">Agent-based modelling is proving itself to be an extremely valuable approach to understanding and modelling social systems. In particular, the treatment of individuals directly - rather than through aggregate statistical rules - places it in an ideal position to model dynamical systems that depend on the actions and interactions of numerous individuals. Part of the success of the methodology can be attributed to its interdisciplinarity; researchers from disciplines ranging from sociology and psychology to computer science and physics have contributed to its development. </p>

					<p class="small">However, agent-based modelling has yet to incorporate some key ideas from fields such as meteorology, particularly with respect to improving models dynamically in response to streams of new data. Part of the explanation of this absence can be attributed to data availability - only recently have data sources begun to emerge that have the spatio-temporal resolution and volume to warrant the incorporation of methods similar to those used in the environmental sciences.</p>
	
					<p class="small">This paper begins to address this gap by experimenting with an Ensemble Kalman Filter (EnKF) as a means of dynamically assimilating data into an agent-based model of urban dynamics. The paper will demonstrate that an agent-based model coupled to an EnKF can be a reliable means to dynamically improve predictive models in response to streaming data such as that arising from social media or through devices that count the number of people passing certain points. Importantly, these data do not need to track individuals, which reduces the ethical risks associated with such invasive surveillance. Ultimately the model presented here will be used to create estimates of the size of the population at risk to phenomena such as crime victimisation or to ill health as a result of exposure to air-borne pollutants.</p>
                    
                </section>
                
                  <section id="Overview">
                      <h2>Overview</h2>

                      <p>Background - agent-based models and making future predictions</p>
                      <p>Barriers to ABMs as predictive tools: <i>difficult to calibrate</i></p>
                      <p class="l2">1. Computationally Expensive</p>
                      <p class="l2">2. Data hungry</p>
                      <p class="l2">3. <strong>Divergent</strong></p>
                      <p>Dynamic Data Assimilation (DDA) &amp; ABM - difficulties and outlook</p>

                </section>

                
                
                <section id="abm">
                    <h2>Agent-Based Modelling (ABM)</h2>
                    <img class="right" data-src="../figures/virtual_city.jpeg"/>
                    <p>Autonomous, interacting 'agents'</p>
                    <p>Model phenomena from the 'bottom-up'</p>
                    <p>Advantages:</p>
                    <p class="l2">Modelling complexity, non-linearity, emergence</p>
                    <p class="l2">Natural description of a system</p>
                    <p class="l2">Bridge between verbal theories and mathematical models</p>
                    <p class="l2">History of the evolution of the system</p>
                </section>
           
                <section data-background-video="../videos/sim.mp4,../videos/sim.webm"
                         data-background-video-loop="loop"
                         id="abm-example-predictive">
                    <h2 style="background-color: white;">ABM Example - Burglary</h2>
                    <figure class="fragment">
                        <img  style="width:70%" data-src="../figures/thesis_results.png" />
                        <figcaption style="background-color: white;">
                            Malleson, N., A. Heppenstall, L. See, A. Evans (2013) Using an agent-based crime simulation to predict the effects of urban regeneration on individual household burglary risk. <i>Environment and Planning B: Planning and Design</i> 40 405-426. [DOI: <a href="http://www.envplan.com/abstract.cgi?id=b38057">10.1068/b38057</a>]
                        </figcaption>
                    </figure>
                    <p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p>
                    <p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p>
                    <p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p>
                      
                </section>
                


                <section id="problems1">
                    <h2>ABM Problems</h2>
                    <p>1. Computationally Expensive</p>
                    <p class="l2">Not amenable to machine-led calibration</p>
                    <p>2. Data hungry</p>
                    <p class="l2">Need fine-grained information about individual actions and behaviours</p>
                    <p>3. Divergent</p>
                    <p class="l2">Usually models represent complex systems</p>
                    <p class="l2">Projections / forecasts quickly diverge from reality</p>
                </section>
                
                
                <section id="WhyImmportant">
                    
                    <h2>Who cares?</h2>
                    <p>ABM growing in importance</p>
                    <p class="l2">Smart cities</p>
                    <p class="l2">Pedestrian simulations</p>
                    <p class="l2">Evacuation</p>
                    <p class="l2">Traffic</p>
                    <p class="l2"> . . .</p>
                    <p>The most appropriate methodology for simulating complex (social) systems</p>
                    <p>(Potentially) drive urban planning decisions in a smart cities context</p>  
                </section>
                
                
                <section id="prob-computation">
                    <h2>1. Computationally Expensive</h2>
                    <img class="right" src="../figures/parameter_space.png" />
                    <p>Very large parameter space to explore</p>
                    <p class="l2">Models are usually highly non-linear</p>
                    <p>And very difficult to explore it</p>
                    <p class="l2">Lots of agents * lots of iterations * lots of model runs</p>
                    <p>But not so much of a problem as it once was</p>
                </section>
                
                 <section data-background-video="../videos/surf_simulation_1-540p.webm"
                         data-background-video-loop="loop"
                         id="abm-improbable-video2">
                    
                    <div id="columns" class="fragment">
                        <div class="left column" style="background-color:rgba(255,255,255,0.5)" >
                            <p>Simulating Urban Flows (surf) prototype</p>
                            <p><a href="https://github.com/nickmalleson/surf" >github.com/nickmalleson/surf</a></p>
                        </div>
                    <!--<a style="background-color:white;" href="http://surf.leeds.ac.uk/announce/2015/12/10/ImprobableSim.html">http://surf.leeds.ac.uk/announce/2015/12/10/ImprobableSim.html</a>-->                        
                        <div class="right column">
                            <figure >
                                <figcaption>
                                    Source: Improbable Spatial OS <a href="http://improbable.io/learn-more">http://improbable.io/learn-more</a>
                                </figcaption>
                                <a href="http://improbable.io/learn-more"><img data-src="../figures/spatialos.jpg" /></a>
                        </figure>
                        </div>
                    </div>
                </section>
                
                
                
                
                
                
                

                
                <section id="prob-data">
                    <figure class="right">
                        <a href="http://science.sciencemag.org/content/310/5750/987"><img src="../figures/grimm-pattern_oriented.jpg", alt="Example of different modelling scales"/></a>
                        <figcaption>Pattern oriented modelling. Source: Grim et al. (2005)</figcaption>
                    </figure>
                    <h2>2. Data Hungry</h2>
                    <p>Data required at every stage</p>
                    <p class="l2">Particularly for calibration and validation</p>

                    <p>But high-quality data are hard to come by</p>
                    <p class="l2">Many sources are too sparse, low spatial/temporal resolution</p>
                    <p class="l2">Censuses focus on attributes rather than behaviour and occur infrequently</p>
                    <p class="l2">Also need data from numerous scales (e.g. <em>pattern oriented modelling:</em> Grimm et al. 2005)</p>
                    <p>Understanding social behaviour</p>
                    <p class="l2">How to estimate leisure times / locations?  Where to socialise?</p>
                </section>
                
                <section id="Data-Mobile">
                    <figure class="right">
                        <img data-src="../figures/paper_figures/census_mobile-correlation-map.png" alt="Comparing census daytime populations to aggregate mobile phone estimates" />
                        <figcaption>Evaluating aggregate mobile phone population accuracy</figcaption>
                    </figure>
                    <h2>Rise of Big Data</h2>
                    <p>Recent explosion in data volume.</p>
                    <p>'Datafication'</p>
                    <p><i>Streams of data</i></p>
                    <p>Great potential for calibrating ABM</p>
                    <h3>Example: Mobile Communications</h3>
                    <!--<img class="left" data-src="../figures/paper_figures/census_mobile-correlation.png" alt="Comparing census daytime populations to aggregate mobile phone estimates" />-->
 
                </section>
                
                <section id="Data-Twitter">
                    <h2>'Big Data'</h2>
                    <h3>Example: Social Media</h3>
                    <figure>
                        <img data-src="../figures/paper_figures/example_activity_space1-forStanford-3D.png" alt="Example activity spaces derived from twitter messages"/>
                        <figcaption>Malleson, N and M. Birkin. (2014) New Insights into Individual Activity Spaces using Crowd-Sourced Big Data. <i>Paper presented at the 2014 <a href="http://www.scienceengineering.org/ase/conference/2014/bigdata/sanjose/website/">BigData conference,</a> Stanford, CA, USA, 27-31 May.</i> [<a href="http://nickmalleson.co.uk/wp-content/uploads/2014/05/bigdata-stanford-final.pdf">paper (pdf)</a>][<a href="http://nickmalleson.co.uk/html/presentations/2014-05-BigData">slides (html)</a>].
                        </figcaption>
                    </figure>
                </section>
                
                
                <section id="Data-Geo-Apps">
                    <img class="right" data-src="../figures/traces.jpg" alt="Traces of movement from a smart-phone app" />
                    <h2>'Big Data'</h2>
                    <h3>Example: Geo-Apps</h3>
                    <p>Smart-phone apps that capture movement / location are becoming ubiquitous</p>
                    <p>Great potential for understanding (some) urban dynamics</p>
                </section>
                
                <section id="Data-Geo-Apps2" data-background-image="../figures/pokemon.jpg">
                    
                </section>
                
                
                
                
                
                
                
                <section id="prob-divergence" 
                         data-background-video="../videos/BBC_Swarm_Natures_Incredible_Invasions.mp4" 
                         data-background-video-muted 
                         data-background-video-loop="loop">
                    
                    <div class="whitebackground fragment">
                        <h2>3. Divergence</h2>
                        <p>Complex systems</p>
                        <p>One-shot calibration</p>
                        <p>Nonlinear models predict near future well, but diverge over time.</p>
                    </div>
                </section>
                
                <section id="abm-calibration">
                    
                    <figure class="right" style="width:30%">
                        <img data-src="../figures/modelling_process.png" alt="The process of calibration"/>
                        <figcaption>Typical model development process</figcaption>
                    </figure>
                    
                    <h2>3. Divergence</h2>
                    <p>Drawback with the 'typical' model development process</p>
                    <p>Waterfall-style approach is common</p>
                    <p>Calibrate until fitness is reasonable, then make predictions</p>
                    <p>But we can do better:</p>
                    <p class="l2">Better computers</p>
                    <p class="l2">More (streaming) data</p>
                    <p>Methodological gap</p>
                    
                </section>
                

                
                <section id="dda">
                    <h2>Dynamic Data Assimilation</h2>
                    <p>Used in meteorology and hydrology to constrain models closer to reality.</p>
                    <p>We can:</p>
                    <p class="l2">Restart model with new (up to date) data</p>
                    <p class="l2">Adjust model parameters to better match reality</p>
                </section>
                
                
                <section id="dda2">
                    <h2>Dynamic Data Assimilation</h2>
                    <h3>How?</h3>
                    <p>Particle filters</p>
                    <p class="l2">Indoor footfall (Rai and Hu, 2013.; Wang and Hu, 2015)</p>
                    <p>Kalman Filter</p>
                    <p class="l2">Air traffic (Chen et al., 2012)</p>
                    <p>Ensemble Kalman Filter</p>
                    <p class="l2">Pedestrian footfall (Ward et al., 2016)</p>
                    <p>Sequential Monte Carlo (SMC)</p>
                    <p class="l2">Wildfire (Hu, 2011; Mandel et al., 2012)</p>
                
                </section>
                
                <section id="enkf">
                    
                    <h2>Ensemble Kalman Filter (EnKF)</h2>
                    <h3>Outline</h3>
                    <figure>
                        <img data-src="../figures/paper_figures/darsos-fig2a.png"/>
                        <figcaption>
                            Ward, J., A. Evans, N. Malleson (2016) Dynamic calibration of agent-based models using data assimilation. <i>Royal Society Open Science</i>. 3:150703. (open access). [DOI: <a href="https://dx.doi.org/10.1098/rsos.150703">10.1098/rsos.150703</a>]
                        </figcaption>
                    </figure>                
                </section>

                
                
                <section id="enkf-maths">
                    <h2>Ensemble Kalman Filter (EnKF)</h2>
                    <h3>Maths</h3>
                    <p>Broad literature, but generally tied to mathematical models (e.g. differential equations and linear functions)</p>
                    <p>Not applicable to ABM (inherently non-linear)</p>
                    <p>Working with a mathematician to do the hard work!</p>
                    <p class="l2">In all its glory: Ward et al., (2016)</p>
                    <h3>Advantages</h3>
                    <p>Similar to <i>Kalman Filter</i> (best in class)</p>
                    <p>But better for nonlinear systems</p>
                    
                </section>
                
                <section data-background-image="../figures/surf_workplan-v2.png" id="vision-surf">
                    <div class="whitebackground2 fragment">
                        <h2>Conclusion and Outlook</h2>
                        <p>Potential for ABM to be better at making future predictions</p>
                        <p class="l2" style="color:RGB(0,80,0);">Computing power</p>
                        <p class="l2" style="color:RGB(0,80,0);">Big Data</p>
                        <p class="l2" style="color:red;">Data assimilation</p>
                        <p>Adapt methods used commonly in other fields</p>
                        <p>Potential for ABM + DDA + Smart Cities ... </p>
                    </div>
                </section>                
                
                <section id="references">
                    
                    <p></p>
                    
                    <p>Chen, Haiyan, Jiandong Wang, and Lirong Feng. 2012. “Research on the Dynamic Data-Driven Application System Architecture for Flight Delay Prediction.” Journal of Software 7 (2). doi:10.4304/jsw.7.2.263-268.</p>
                    
                    <p>Grimm, Volker, Eloy Revilla, Uta Berger, Florian Jeltsch, Wolf M. Mooij, Steven F. Railsback, Hans-Hermann Thulke, Jacob Weiner, Thorsten Wiegand, and Donald L. DeAngelis. (2005) Pattern-Oriented Modeling of Agent-Based Complex Systems: Lessons from Ecology. <i>Science</i> 310(5750): 987–91. doi:10.1126/science.1116681.</p>
                    
                    <p>Hu, Xiaolin. 2011. “Dynamic Data Driven Simulation.” SCS M&amp;S Magazine 1: 16–22.</p>
                    
                    <p>Mandel, Jan, Jonathan D. Beezley, Adam K. Kochanski, Volodymyr Y. Kondratenko, and Minjeong Kim. 2012. “Assimilation of Perimeter Data and Coupling with Fuel Moisture in a Wildland Fire–Atmosphere DDDAS.” Procedia Computer Science 9: 1100–1109. doi:10.1016/j.procs.2012.04.119.</p>

                    
                    <p>Rai, S., and X. Hu. 2013. “Behavior Pattern Detection for Data Assimilation in Agent-Based Simulation of Smart Environments.” In 2013 IEEE/WIC/ACM International Joint Conferences on Web Intelligence (WI) and Intelligent Agent Technologies (IAT), 2:171–78. doi:10.1109/WI-IAT.2013.106.</p>
                    
                    
                    
                    <p>Wang, M. and X. Hu (2015). Data assimilation in agent based simulation of smart environments using particle filters. Simulation Modelling Practice and Theory 56, 36–54.</p>
                    
                    <p>Ward, Jonathan A., Andrew J. Evans, and Nicolas S. Malleson. 2016. “Dynamic Calibration of Agent-Based Models Using Data Assimilation.” Open Science 3 (4). doi:10.1098/rsos.150703.</p>
                    
                </section>
                
                
                <section class="title" id="thanks">
                    <h1>Thank you</h1>
                                        
                    <h2>Agent-Based Modelling, the Next 20 Years: <i>Dynamic Data Assimilation</i></h2>
                    <hr/>
                    <h3><a href="http://www.geog.leeds.ac.uk/people/n.malleson/">Nick Malleson</a>, Jon Ward, Andy Evans</h3>
                    <h4>Schools of Geography &amp; Mathematics, University of Leeds</h4>
                    <h4><a href="http://nickmalleson.co.uk">nickmalleson.co.uk</a></h4>
                    <h4><a href="http://surf.leeds.ac.uk">surf.leeds.ac.uk</a></h4>
                    <p style="text-align:center">These slides: <a href="http://surf.leeds.ac.uk/presentations.html">http://surf.leeds.ac.uk/presentations.html</a></p>
                </section>
                

                
			</div>
		</div>

		<script src="reveal/lib/js/head.min.js"></script>
		<script src="reveal/js/reveal.js"></script>

		<script>
			// More info https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				history: true,

				// More info https://github.com/hakimel/reveal.js#dependencies
				dependencies: [
					{ src: 'reveal/plugin/markdown/marked.js' },
					{ src: 'reveal/plugin/markdown/markdown.js' },
					{ src: 'reveal/plugin/notes/notes.js', async: true },
					{ src: 'reveal/plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } }
				]
			});
		</script>
	</body>
</html>
